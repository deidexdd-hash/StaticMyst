/**
 * –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
 * –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É CORS –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–µ—Ä–µ–∑ file://
 */

// –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∫–∞–∫ JavaScript –æ–±—ä–µ–∫—Ç
const KNOWLEDGE_BASE = {
    "loading": "–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...",
    "status": "embedded"
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª–Ω–æ–π –±–∞–∑—ã
async function loadKnowledgeBase() {
    try {
        // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ http)
        const response = await fetch('data/knowledge_structured_full.json');
        const data = await response.json();
        Object.assign(KNOWLEDGE_BASE, data);
        console.log('üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞');
        return KNOWLEDGE_BASE;
    } catch (error) {
        // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å (file:// –ø—Ä–æ—Ç–æ–∫–æ–ª), –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É
        console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª–Ω—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é');
        
        // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞
        const embeddedKB = {
            "interpretations": {
                "1": {
                    "title": "–•–∞—Ä–∞–∫—Ç–µ—Ä, –í–æ–ª—è",
                    "description": "–õ–∏–¥–µ—Ä—Å–∫–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å"
                },
                "2": {
                    "title": "–≠–Ω–µ—Ä–≥–∏—è",
                    "description": "–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞–±–æ—Ç–∞ —Å –ª—é–¥—å–º–∏"
                },
                "3": {
                    "title": "–ü–æ–∑–Ω–∞–Ω–∏–µ",
                    "description": "–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –∏–Ω—Ç–µ—Ä–µ—Å—ã, –∑–Ω–∞–Ω–∏—è"
                },
                "4": {
                    "title": "–ó–¥–æ—Ä–æ–≤—å–µ",
                    "description": "–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏–ª–∞, –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å"
                },
                "5": {
                    "title": "–õ–æ–≥–∏–∫–∞",
                    "description": "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–Ω—Ç—É–∏—Ü–∏—è, –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ"
                },
                "6": {
                    "title": "–¢—Ä—É–¥",
                    "description": "–ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å, –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–º"
                },
                "7": {
                    "title": "–£–¥–∞—á–∞",
                    "description": "–í–µ–∑–µ–Ω–∏–µ, —Ñ–æ—Ä—Ç—É–Ω–∞"
                },
                "8": {
                    "title": "–î–æ–ª–≥",
                    "description": "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å"
                },
                "9": {
                    "title": "–ü–∞–º—è—Ç—å",
                    "description": "–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞"
                }
            },
            "practices": {
                "meditation": [
                    {
                        "id": "med_1",
                        "name": "–ú–µ–¥–∏—Ç–∞—Ü–∏—è –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏",
                        "description": "–ë–∞–∑–æ–≤–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–Ω–∏–º–∞–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏",
                        "duration": "15-20 –º–∏–Ω—É—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ",
                        "steps": [
                            "–°—è–¥—å—Ç–µ –≤ —É–¥–æ–±–Ω—É—é –ø–æ–∑—É",
                            "–ó–∞–∫—Ä–æ–π—Ç–µ –≥–ª–∞–∑–∞",
                            "–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –¥—ã—Ö–∞–Ω–∏–∏",
                            "–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –º—ã—Å–ª—è–º–∏ –±–µ–∑ –æ—Ü–µ–Ω–∫–∏"
                        ]
                    }
                ],
                "breathing": [
                    {
                        "id": "breath_1",
                        "name": "–î—ã—Ö–∞–Ω–∏–µ 4-7-8",
                        "description": "–¢–µ—Ö–Ω–∏–∫–∞ –¥–ª—è —É—Å–ø–æ–∫–æ–µ–Ω–∏—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã",
                        "duration": "5-10 –º–∏–Ω—É—Ç",
                        "steps": [
                            "–í–¥–æ—Ö –Ω–∞ 4 —Å—á–µ—Ç–∞",
                            "–ó–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ 7 —Å—á–µ—Ç–æ–≤",
                            "–í—ã–¥–æ—Ö –Ω–∞ 8 —Å—á–µ—Ç–æ–≤",
                            "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å 4-8 —Ä–∞–∑"
                        ]
                    }
                ]
            },
            "ancestral": {
                "types": {
                    "1": {
                        "type": "–†–æ–¥ –õ–∏–¥–µ—Ä–æ–≤",
                        "description": "–í–∞—à–∏ –ø—Ä–µ–¥–∫–∏ –±—ã–ª–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è–º–∏, –≤–ª–∞—Å—Ç–Ω—ã–º–∏ –ª—é–¥—å–º–∏",
                        "gift": "–°—É–ø–µ—Ä—Å–∏–ª–∞ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"
                    },
                    "2": {
                        "type": "–†–æ–¥ –î–∏–ø–ª–æ–º–∞—Ç–æ–≤",
                        "description": "–ü—Ä–µ–¥–∫–∏ –±—ã–ª–∏ –º–∏—Ä–æ—Ç–≤–æ—Ä—Ü–∞–º–∏ –∏ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞–º–∏",
                        "gift": "–°—É–ø–µ—Ä—Å–∏–ª–∞ –≥–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π"
                    },
                    "3": {
                        "type": "–†–æ–¥ –¢–≤–æ—Ä—Ü–æ–≤",
                        "description": "–ü—Ä–µ–¥–∫–∏ –±—ã–ª–∏ –∞—Ä—Ç–∏—Å—Ç–∞–º–∏, –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—è–º–∏",
                        "gift": "–°—É–ø–µ—Ä—Å–∏–ª–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è"
                    }
                }
            },
            "forecast": {
                "personal_years": {
                    "1": {
                        "theme": "–ì–æ–¥ –ù–æ–≤—ã—Ö –ù–∞—á–∏–Ω–∞–Ω–∏–π",
                        "description": "–í—Ä–µ–º—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤"
                    },
                    "2": {
                        "theme": "–ì–æ–¥ –ü–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞",
                        "description": "–§–æ–∫—É—Å –Ω–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ"
                    },
                    "3": {
                        "theme": "–ì–æ–¥ –¢–≤–æ—Ä—á–µ—Å—Ç–≤–∞",
                        "description": "–í—Ä–µ–º—è –¥–ª—è —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏ —Ä–∞–¥–æ—Å—Ç–∏"
                    }
                }
            }
        };
        
        Object.assign(KNOWLEDGE_BASE, embeddedKB);
        console.log('üìö –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π');
        return KNOWLEDGE_BASE;
    }
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if (typeof window !== 'undefined') {
    window.KNOWLEDGE_BASE = KNOWLEDGE_BASE;
    window.loadKnowledgeBase = loadKnowledgeBase;
}
